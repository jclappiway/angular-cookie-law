/**
 * angular-cookie-law - @version v0.2.4 - @author Palmabit Srl<hello@palmabit.com> - @contributors Jclappiway<jcl@appiway.com>
 */
"use strict";angular.module("angular-cookie-law",["ngCookies"]),angular.module("angular-cookie-law").value("cookieLawName","_cle").value("cookieLawAccepted","accepted").value("cookieLawDeclined","declined"),angular.module("angular-cookie-law").directive("cookieLawBanner",["$compile","CookieLawService",function($compile,CookieLawService){return{restrict:"EA",replace:!0,scope:{message:"@",acceptText:"@",declineText:"@",policyText:"@",policyURL:"@",cookieDomain:"@"},link:function(scope,element,attr){var template,options,expireDate,acceptButton="",declineButton="",policyButton="";scope.$watchGroup(["message","acceptText","declineText","policyText","policyURL"],function(){CookieLawService.isEnabled()||(options={message:attr.message||"We use cookies to track usage and preferences.",acceptButton:attr.acceptButton||!0,acceptText:attr.acceptText||"I Understand",declineButton:attr.declineButton||!1,declineText:attr.declineText||"Disable Cookies",policyButton:attr.policyButton||!1,policyText:attr.policyText||"Privacy Policy",policyURL:attr.policyUrl||"/privacy-policy/",policyBlank:attr.policyBlank&&"true"===attr.policyBlank?'target="_blank"':"",expireDays:attr.expireDays||365,element:attr.element||"body",cookieDomain:attr.cookieDomain||void 0},expireDate=new Date,expireDate.setTime(expireDate.getTime()+24*options.expireDays*60*60*1e3),expireDate=expireDate.toGMTString(),options.acceptButton&&(acceptButton='<a href="" class="cl-accept" ng-click="accept()">'+options.acceptText+"</a>"),options.declineButton&&(declineButton=' <a href="" class="cl-disable" ng-click="decline()">'+options.declineText+"</a>"),options.policyButton&&(policyButton=' <a href="'+options.policyURL+'" class="cl-policy" '+options.policyBlank+">"+options.policyText+"</a>"),template='<div class="cl-banner"><p>'+options.message+"<br>"+acceptButton+declineButton+policyButton+"</p></div>",element.html(template),$compile(element.contents())(scope),scope.accept=function(){CookieLawService.accept(expireDate,options.cookieDomain),scope.onAccept(),element.remove(),scope.onDismiss()},scope.decline=function(){CookieLawService.decline(options.cookieDomain),scope.onDecline()})})},controller:["$rootScope","$scope",function($rootScope,scope){scope.onAccept=function(){$rootScope.$broadcast("cookieLaw.accept")},scope.onDismiss=function(){$rootScope.$broadcast("cookieLaw.dismiss")},scope.onDecline=function(){$rootScope.$broadcast("cookieLaw.decline")}}]}}]),angular.module("angular-cookie-law").directive("cookieLawWait",["CookieLawService",function(CookieLawService){return{priority:1,terminal:!0,restrict:"EA",replace:!0,template:"<span ng-transclude></span>",transclude:!0,scope:!1,link:function(scope,element,attrs,controller,transclude){function loadTransclude(){element.html(""),transclude(scope,function(clone){element.html(""),element.append(clone)})}CookieLawService.isEnabled()&&loadTransclude(),scope.$on("cookieLaw.accept",function(){loadTransclude()})}}}]),angular.module("angular-cookie-law").factory("CookieLawService",["$cookies","cookieLawName","cookieLawAccepted","cookieLawDeclined",function($cookies,cookieLawName,cookieLawAccepted,cookieLawDeclined){var accept=function(expireDate,cookieDomain){$cookies.put(cookieLawName,cookieLawAccepted,{domain:cookieDomain,expires:expireDate})},decline=function(cookieDomain){$cookies.put(cookieLawName,cookieLawDeclined,{domain:cookieDomain,expires:expireDate})},isEnabled=function(){return $cookies.get(cookieLawName)===cookieLawAccepted};return{accept:accept,decline:decline,isEnabled:isEnabled}}]);